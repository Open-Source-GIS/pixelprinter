page << "Status.hideAll();"
page << "Dialog.close();"

page.replace_html("template-edit-link-#{@tmpl.id}", @tmpl.name)
page << "$('#template-edit-link-#{@tmpl.id}').effect('pulsate');"
page << "$('#template-checkbox-#{@tmpl.id}').attr('checked', #{@tmpl.default});"

# remove old preview (which is cached on the current page), so that it can be reloaded again
page.replace("template-preview-#{@tmpl.id}", "")
page << "Templates.update(#{@tmpl.id});"